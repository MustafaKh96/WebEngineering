<!DOCTYPE html>
<html lang="en">
<head>
    <!--Start-->
    <!--https://www.w3schools.com/w3css/tryit.asp?filename=tryw3css_icons_awesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--End-->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PHP</title>
    <link rel="stylesheet" href="../Exercise 1/Exrcise_1.css">
    <style>
        table{
            border-style: double;
            width: 100%;
        }
        th, td{
            border: 1px solid black;
            box-shadow: 0 1px 1px black;
            padding: 10px 20px;
        }
    </style>
</head>
<body>
    <div class="Header">
        <div id="hOmE">
            <a href="../AppExercise/AppExercise.html"><i class="fa fa-home" style="font-size:60px;color:rgb(143, 143, 143)"></i></a>
        </div>
        <div id="Links">
            <a href="./Exercise_12_1_1.html">
            <i class="fa fa-arrow-left" style="font-size:57px;color:rgb(143, 143, 143)"></i></a>
        </div>
        </a>
        <div class="Uebung" id="U11">
            <h3> 12.2 Login mit PHP</h3>
        </div>
        <div id="rechts"> 
            <a href="./Exercise_12_3.php"><i class="fa fa-arrow-right" style="font-size:57px;color:rgb(143, 143, 143)"></i></a>
        </div>
        <div id="abc">
            <i class="fa fa-bars" style="font-size:57px;color:rgb(143, 143, 143)"></i>
            <div class="Index" style="right:0;">
            <a href="./Exercise_12_1_1.html">12.1 Registrierung mit PHP</a>
            <a href="./Exercise_12_2.html">12.2 Login mit PHP</a>
            <a href="./Exercise_12_3.php">12.3 WWW-Navigator zum Content-Editor ausbauen</a>
            </div>
        </div>
    </div>
    <div class="Loesung">
    <h2 class="question">
        Erstellen Sie mit PHP 5 auf www2.inf.h-brs.de ein Registrierungsformular. Speichern Sie die eingegebenen Daten persistent in einer Datei auf www2.inf.h-brs.de. <br> Schreiben Sie Ihre PHP-Scripte so, dass es zu keinen Nebenl√§ufigkeitsartefakten (z.B. Lost Update) kommen kann, egal wie viele Nutzer sich gleichzeitig registrieren.
    </h2>
    <h2 class="answer">
        <pre style="white-space: pre-wrap;">
&lt;form method="post">
&lt;fieldset>
&lt;legend>registrieren:&lt;/legend>
    Benutzername:&lt;br>
    &lt;input type="text" name="Benutzername">
    &lt;br>
    Passwort:&lt;br>
    &lt;input type="password" name="Passwort">
    &lt;br>&lt;br>
    &lt;input type="submit" value="registrieren">
    &lt;/fieldset>
&lt;/form>

&lt;?PHP
if (isset($_POST['BenutzernameEinlogen']) && isset($_POST['PasswortEinlogen']) ){
    $SALT = "asdf yxcv ertz hjkl iopo vbmn ,.";
    $BenutzernameEinlogen = hash("sha384", $_POST['BenutzernameEinlogen'].SALT);
    $PasswortEinlogen = hash("sha384", $_POST[ 'PasswortEinlogen' ].SALT);
    if (($Daten = fopen("Benutzerdaten.csv", "r")) !== FALSE) {
        while (($Daten2 = fgetcsv($Daten, 1000, ",")) !== FALSE) {
            for ($c=0; $c &lt; 2; $c++) {
                if($BenutzernameEinlogen === $Daten2[0] && $PasswortEinlogen === $Daten2[1]){
                    echo "&lt;script>alert('Sie sind eingelogt :)')&lt;/script>";
                    return;
                }  
            }
        }
        echo "&lt;script>alert('Einlogen ist fehlgeschlagen :(')&lt;/script>";
    }
}
?>
        </pre>
    </h2>
</div>
</body>