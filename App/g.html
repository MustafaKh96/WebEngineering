<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    
    class Vorrang{
        constructor(relation){
            this.relation = relation;
            if(this.relation.length == 0){
                throw('Ihre Relation ist leer :(');
            }
            else{
                var n = 0;
                while(n < this.relation.length){
                    var wort1 = this.relation[n][0];
                    var rel_tmp = this.relation[n];
                    var z = 0;
                    while(z < this.relation.length){
                        if(wort1 === this.relation[z][1]){
                            var zz = 0;
                            while(zz < rel_tmp.length){
                                this.relation[z].push(rel_tmp[zz]);
                                zz = zz + 1;
                            }            
                        }
                        z = z + 1;
                    }
                    n = n + 1;
                }
                //console.log(this.relation);
                let erg = [];
                for(const relation_x of this.relation){
                    let zaehler1 = 0;
                    while(zaehler1 < relation_x.length){
                        erg.push(relation_x[zaehler1]);
                        zaehler1 = zaehler1 + 1;
                    }
                }
                //---------------------------------------------------
                // Quelle: https://stackoverflow.com/questions/37365512/count-the-number-of-times-a-same-value-appears-in-a-javascript-array
                const occurrencesOf = (number,numbers) => numbers.reduce((counter, currentNumber)=> 
                (number === currentNumber ? counter+1 : counter),0);
                //---------------------------------------------------
                var t = 0;
                while(t < 2){
                    for(const wort_x of erg){
                        if(occurrencesOf(wort_x, erg) > 1){
                            erg.splice(erg.indexOf(wort_x), 1);
                        }
                    }
                    t = t + 1;
                }
                return erg;  
            }   
        }
    }

    function topsort(relation){

        if(relation.length == 0){
                throw('Ihre Relation ist leer :(');
        }
        else{
                var n = 0;
                while(n < relation.length){
                    var wort1 = relation[n][0];
                    var rel_tmp = relation[n];
                    var z = 0;
                    while(z < relation.length){
                        if(wort1 === relation[z][1]){
                            var zz = 0;
                            while(zz < rel_tmp.length){
                                relation[z].push(rel_tmp[zz]);
                                zz = zz + 1;
                            }            
                        }
                        z = z + 1;
                    }
                    n = n + 1;
                }
                let erg = [];
                for(const relation_x of relation){
                    let zaehler1 = 0;
                    while(zaehler1 < relation_x.length){
                        erg.push(relation_x[zaehler1]);
                        zaehler1 = zaehler1 + 1;
                    }
                }
                console.log(erg);
                 //---------------------------------------------------
                // Quelle: https://stackoverflow.com/questions/37365512/count-the-number-of-times-a-same-value-appears-in-a-javascript-array
                const occurrencesOf = (number,numbers) => numbers.reduce((counter, currentNumber)=> 
                (number === currentNumber ? counter+1 : counter),0);
                //--------------------------------------------------- 
                var t = 0;
                while(t < 2){
                    for(const wort_x of erg){
                        if(occurrencesOf(wort_x, erg) > 1){
                            erg.splice(erg.indexOf(wort_x), 1);
                        }
                    }
                    t = t + 1;
                }
                var e = 0;
                let z12 = [];
                while(e < erg.length){
                    for(const rel of relation){
                        if(erg[e] === rel[1]){
                            var ind = erg.indexOf(erg[e]);
                            while(ind < erg.length){
                                if(rel[0] === erg[ind]){
                                    var tmp;
                                    tmp = erg[e];
                                    erg[e] = erg[ind];
                                    erg[ind] = tmp;
                                }
                                ind = ind + 1;
                            }
                        }
                    }
                    e = e + 1;     
                }
                return erg;  
        }   
    }






//const test1 = new Vorrang([["studieren","prüfen"],["schlafen","studieren"], ["essen","studieren"]]);
//const test2 = new Vorrang([["essen","rauchen"],["schlafen","essen"],["rauchen","lernen"]]);

const test1 = topsort([["schlafen","studieren"], ["essen","studieren"],["studieren","prüfen"],]);
const test2 = topsort([["B","C"], ["A","B"], ["A","F"]]);
for(const erg of test1){
console.log(erg);
}
console.log('------');
for(const erg of test2){
console.log(erg);
}
</script>
</html>