<!DOCTYPE html>
<html>
<head>
<style>

</style>
</head>
<body>
    <h1>Rednerliste</h1>
    <label for="fname">Neuer Redner: </label>
    <input type="text" id="rednername">       
    <button id="hinzufuegen">Hinzufügen</button>
    <ul id="myList"></ul>
    </body>

    <script>

class Vorrang {
    constructor(args) {
        this.relations = args
        this.elements = new Set(this.relations.flat())
        this.predecessors = new Object()

        for (let element of this.elements) {
            this.predecessors[element] = 0
        }

        for (let entry of Object.entries(this.relations)) {
            this.predecessors[entry[1][1]] += 1
        }
        
        this.predecessors = Object.fromEntries(
            Object.entries(this.predecessors).sort(([,a],[,b]) => a-b)
        );

        this.successors = new Map()

        for (let element of this.elements) {
            this.successors.set(element,[])
        }

        for (let entry of Object.entries(this.relations)) {
            let x = this.successors.get(entry[1][0])
            x.push(entry[1][1])
            this.successors.set(entry[1][0],x)
        }

    }

    [Symbol.iterator]() {
        return {
            next: () => {
                if (Object.values(this.predecessors).includes(0)) {
                    let result = undefined
                    for (let [key,value] of Object.entries(this.predecessors)) {
                        if (value == 0) {
                            result = key
                            delete this.predecessors[key]
                            for (let element of this.successors.get(key)) {
                                this.predecessors[element] -= 1
                            }
                            return {value: result, done: false}
                        }
                    }                
                }
                else {
                    return {done: true}
                } 
            }
        }
    }
}


const test1 = new Vorrang([  ["b", "z"],["a", "z"],["schlafen", "studieren"]  ])
const test2 = new Vorrang([])
const test3 = new Vorrang([["unterhose","hose"], ["shirt", "jacke"], ["socken", "schuhe"], ["socken", "hose"], ["hose", "jacke"], ["hose", "schuhe"]])
const test4 = new Vorrang([["blitz", "donner"], ["regen", "traufe"]])
const test5 = new Vorrang([['huhn', 'ei'], ['ei','huhn']])

//const test1 = new Vorrang([["studieren","prüfen"], ["schlafen","studieren"], ["essen","studieren"]]);
//const test2 = new Vorrang([["essen","rauchen"],["schlafen","essen"],["rauchen","lernen"]]);
console.log(test1);

for(const erg of test1){
    console.log(erg);
}
console.log('------');
for(const erg of test2){
    console.log(erg);
}

    </script> 
</html>